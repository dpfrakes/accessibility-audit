// let data = require('./all_info');

let data = {"Explorers-Festival-2018-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 27, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 3, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 12, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 22, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 3, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 4, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 8, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H37": 21, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H67.2": 5, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.BgImage": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42.2": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyNoId": 13, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.BgImage": 3, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Placeholder": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 4, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H30.2": 1, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2}, "Forces-of-Nature-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 31, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 3, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 15, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 18, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 4, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 5, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 1, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H49.AlignAttr": 1, "WCAG2AA.Principle2.Guideline2_1.2_1_2.F10": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.Abs": 6, "WCAG2AA.Principle2.Guideline2_4.2_4_1.G1,G123,G124.NoSuchID": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Placeholder": 7, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 5, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2}, "Grant-Opportunities-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 26, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 20, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 14, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 3, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 12, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 8, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H49.Font": 1, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2}, "Great-Pacific-Garbage-Patch-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 11, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 31, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 20, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 18, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 4, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 4, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 2, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyNoId": 4, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H37": 12, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Placeholder": 163, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42.2": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 5, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.BgImage": 18, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.Abs": 6, "WCAG2AA.Principle2.Guideline2_4.2_4_1.G1,G123,G124.NoSuchID": 1, "WCAG2AA.Principle3.Guideline3_2.3_2_2.H32.2": 2, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputSearch.Name": 2, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H30.2": 10, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2}, "Nat-Geo-Museum-Exhibitions-and-Events-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 71, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 31, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 5, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 17, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 33, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 15, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 1, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 6, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 15, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.BgImage": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.BgImage": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyNoId": 53, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H37": 34, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.Abs": 9, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 1}, "NatGeo-Mapmaker-Interactive.csv": {"WCAG2AA.Principle3.Guideline3_1.3_1_1.H57.2": 1, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 6, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H30.2": 425, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H2.EG3": 2, "WCAG2AA.Principle3.Guideline3_2.3_2_2.H32.2": 3, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputSearch.Name": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.Button.Name": 5, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 6, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 8, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 1, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H44.NonExistentFragment": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.Textarea.Name": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.F68": 12, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputText.Name": 9, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H37": 37, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputRange.Name": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Placeholder": 4, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42.2": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Empty": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 6, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyNoId": 6, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.Abs": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Name": 2, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputCheckbox.Name": 1, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.Select.Value": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H85.2": 3, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 422, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 2}, "National-Geographic-Bee-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 5, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 31, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 3, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 14, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 18, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 2, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 4, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.Placeholder": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 5, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyNoId": 2, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyWithName": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 7, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.BgImage": 9, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2}, "National-Geographic-Society-National-Geographic-Society.csv": {"WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 72, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 8, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.BgImage": 23, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.Fieldset.Name": 1, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H71.NoLegend": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.Button.Name": 1, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 15, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 66, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 4, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H53,ARIA6": 1, "WCAG2AA.Principle2.Guideline2_1.2_1_2.F10": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 4}, "Titanic-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 26, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 5, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 11, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 14, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 11, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 1, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 5, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 13, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.BgImage": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.BgImage": 1, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H37": 2, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H67.2": 2}, "Watch-Explorers-Festival-National-Geographic-Society.csv": {"WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Abs": 40, "WCAG2AA.Principle4.Guideline4_1.4_1_1.F77": 26, "WCAG2AA.Principle1.Guideline1_3.1_3_1_A.G141": 2, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H48": 11, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent": 16, "WCAG2AA.Principle2.Guideline2_1.2_1_1.G90": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.FGColour": 3, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42": 1, "WCAG2AA.Principle1.Guideline1_4.1_4_3_F24.F24.BGColour": 5, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H37": 17, "WCAG2AA.Principle1.Guideline1_1.1_1_1.H67.2": 1, "WCAG2AA.Principle1.Guideline1_3.1_3_1.H42.2": 1, "WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.EmptyNoId": 75, "WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.Abs": 3, "WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1": 2}};

let sites = Object.keys(data);

let uniqueCodes = [];
sites.forEach((s) => {
    codes = Object.keys(data[s]);
    uniqueCodes = Array.from(new Set(uniqueCodes.concat(codes)))
});

let series = [];
uniqueCodes.forEach((code) => {
    let siteArray = [];
    sites.forEach((s) => siteArray.push(data[s][code] || 0))
    series.push({
        name: code,
        data: siteArray
    })
});

Highcharts.chart('container', {
  chart: {
    type: 'column',
    height: 1200
  },
  title: {
    text: 'WCAG Errors Analysis'
  },
  xAxis: {
    categories: sites
  },
  yAxis: {
    min: 0,
    title: {
      text: 'WCAG Errors'
    },
    stackLabels: {
      enabled: true,
      style: {
        fontWeight: 'bold',
        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
      }
    }
  },
  tooltip: {
    headerFormat: '<b>{point.x}</b><br/>',
    pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
  },
  plotOptions: {
    column: {
      stacking: 'normal',
      dataLabels: {
        enabled: true,
        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
      }
    }
  },
  series: series
});